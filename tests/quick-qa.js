#!/usr/bin/env node\n/**\n * Quick Quality Assurance Test Runner\n * Fast subset of tests for development workflow\n */\n\nconst { execSync, spawn } = require('child_process');\nconst fs = require('fs');\nconst path = require('path');\n\nconst colors = {\n  red: '\\033[0;31m',\n  green: '\\033[0;32m',\n  yellow: '\\033[1;33m',\n  blue: '\\033[0;34m',\n  reset: '\\033[0m'\n};\n\nfunction print(status, message) {\n  const color = colors[status] || colors.reset;\n  console.log(`${color}[${status.toUpperCase()}]${colors.reset} ${message}`);\n}\n\nasync function checkServer() {\n  try {\n    const response = await fetch('http://localhost:3000');\n    return response.ok;\n  } catch {\n    return false;\n  }\n}\n\nfunction runCommand(command, description) {\n  print('blue', `Running ${description}...`);\n  try {\n    execSync(command, { stdio: 'pipe', encoding: 'utf-8' });\n    print('green', `‚úÖ ${description} passed`);\n    return true;\n  } catch (error) {\n    print('red', `‚ùå ${description} failed`);\n    if (error.stdout) print('yellow', error.stdout.substring(0, 200) + '...');\n    return false;\n  }\n}\n\nasync function main() {\n  print('blue', 'üß™ Quick QA Test Suite');\n  print('blue', '=====================');\n  \n  const startTime = Date.now();\n  let passed = 0;\n  let total = 0;\n  \n  // 1. TypeScript Check\n  total++;\n  if (runCommand('npm run type-check', 'TypeScript compilation')) {\n    passed++;\n  }\n  \n  // 2. Linting\n  total++;\n  if (runCommand('npm run lint', 'ESLint analysis')) {\n    passed++;\n  }\n  \n  // 3. Unit Tests\n  total++;\n  if (runCommand('npm test -- --passWithNoTests --silent', 'Unit tests')) {\n    passed++;\n  }\n  \n  // 4. A/B Testing Validation\n  total++;\n  if (runCommand('npm run ab-test:validate', 'A/B test validation')) {\n    passed++;\n  }\n  \n  // 5. Server Check (if running)\n  const serverRunning = await checkServer();\n  if (serverRunning) {\n    print('green', '‚úÖ Development server detected');\n    \n    // 6. Quick Accessibility Check\n    total++;\n    if (fs.existsSync('tests/accessibility/accessibility-audit.js')) {\n      if (runCommand('node tests/accessibility/accessibility-audit.js --quick', 'Quick accessibility check')) {\n        passed++;\n      }\n    } else {\n      print('yellow', '‚ö†Ô∏è Accessibility audit script not found, skipping');\n    }\n  } else {\n    print('yellow', '‚ö†Ô∏è Development server not running, skipping server-dependent tests');\n  }\n  \n  const duration = ((Date.now() - startTime) / 1000).toFixed(2);\n  const successRate = Math.round((passed / total) * 100);\n  \n  print('blue', '\\nüìä Quick Test Summary:');\n  print('blue', `   Duration: ${duration}s`);\n  print('blue', `   Passed: ${passed}/${total} tests`);\n  print('blue', `   Success Rate: ${successRate}%`);\n  \n  if (passed === total) {\n    print('green', '\\nüéâ All quick tests passed!');\n    process.exit(0);\n  } else {\n    print('red', `\\n‚ùå ${total - passed} test(s) failed`);\n    print('yellow', '   Run \\'npm run test:qa:full\\' for detailed analysis');\n    process.exit(1);\n  }\n}\n\nmain().catch(console.error);
